{"version":3,"file":"main-process-session.js","sources":["../../src/src/main/integrations/main-process-session.ts"],"sourcesContent":["import { convertIntegrationFnToClass, defineIntegration } from '@sentry/core';\n\nimport { endSessionOnExit, startSession } from '../sessions';\n\nexport interface Options {\n  /**\n   * Whether sessions should be sent immediately on creation\n   *\n   * @default false\n   */\n  sendOnCreate?: boolean;\n}\n\nconst INTEGRATION_NAME = 'MainProcessSession';\n\n/** Tracks sessions as the main process lifetime. */\nexport const mainProcessSessionIntegration = defineIntegration((options: Options = {}) => {\n  return {\n    name: INTEGRATION_NAME,\n    setupOnce() {\n      // noop\n    },\n    setup() {\n      startSession(!!options.sendOnCreate);\n      endSessionOnExit();\n    },\n  };\n});\n\n/**\n * Tracks sessions as the main process lifetime.\n *\n * @deprecated Use `mainProcessSessionIntegration()` instead\n */\n// eslint-disable-next-line deprecation/deprecation\nexport const MainProcessSession = convertIntegrationFnToClass(INTEGRATION_NAME, mainProcessSessionIntegration);\n"],"names":["defineIntegration","startSession","endSessionOnExit","convertIntegrationFnToClass"],"mappings":";;;AAaA,MAAM,gBAAgB,GAAG,oBAAoB,CAAC;AAE9C;AACa,MAAA,6BAA6B,GAAGA,sBAAiB,CAAC,CAAC,OAAA,GAAmB,EAAE,KAAI;IACvF,OAAO;AACL,QAAA,IAAI,EAAE,gBAAgB;QACtB,SAAS,GAAA;;SAER;QACD,KAAK,GAAA;AACH,YAAAC,qBAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AACrC,YAAAC,yBAAgB,EAAE,CAAC;SACpB;KACF,CAAC;AACJ,CAAC,EAAE;AAEH;;;;AAIG;AACH;AACa,MAAA,kBAAkB,GAAGC,gCAA2B,CAAC,gBAAgB,EAAE,6BAA6B;;;;;"}