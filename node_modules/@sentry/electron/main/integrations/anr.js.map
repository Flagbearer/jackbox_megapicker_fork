{"version":3,"file":"anr.js","sources":["../../src/src/main/integrations/anr.ts"],"sourcesContent":["import { convertIntegrationFnToClass, defineIntegration } from '@sentry/core';\nimport { anrIntegration as nodeAnrIntegration } from '@sentry/node';\nimport { app, powerMonitor } from 'electron';\n\nimport { ELECTRON_MAJOR_VERSION } from '../electron-normalize';\n\n/**\n * Starts a worker thread to detect App Not Responding (ANR) events\n */\nexport const anrIntegration = defineIntegration((options: Parameters<typeof nodeAnrIntegration>[0] = {}) => {\n  if (ELECTRON_MAJOR_VERSION < 22) {\n    throw new Error('Main process ANR detection requires Electron v22+');\n  }\n\n  const integration = nodeAnrIntegration({\n    ...options,\n    staticTags: {\n      'event.environment': 'javascript',\n      'event.origin': 'electron',\n      'event.process': 'browser',\n      ...options.staticTags,\n    },\n    appRootPath: app.getAppPath(),\n  });\n\n  powerMonitor.on('suspend', () => {\n    integration.stopWorker();\n  });\n\n  powerMonitor.on('resume', () => {\n    integration.startWorker();\n  });\n\n  return integration;\n});\n\n/**\n * @deprecated Use `anrIntegration()` instead.\n */\n// eslint-disable-next-line deprecation/deprecation\nexport const Anr = convertIntegrationFnToClass(anrIntegration.name, anrIntegration);\n"],"names":["defineIntegration","ELECTRON_MAJOR_VERSION","nodeAnrIntegration","app","powerMonitor","convertIntegrationFnToClass"],"mappings":";;;;;AAMA;;AAEG;AACU,MAAA,cAAc,GAAGA,sBAAiB,CAAC,CAAC,OAAA,GAAoD,EAAE,KAAI;IACzG,IAAIC,wCAAsB,GAAG,EAAE,EAAE;AAC/B,QAAA,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;AACtE,KAAA;AAED,IAAA,MAAM,WAAW,GAAGC,mBAAkB,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACjC,OAAO,CAAA,EAAA,EACV,UAAU,EAAA,MAAA,CAAA,MAAA,CAAA,EACR,mBAAmB,EAAE,YAAY,EACjC,cAAc,EAAE,UAAU,EAC1B,eAAe,EAAE,SAAS,EACvB,EAAA,OAAO,CAAC,UAAU,CAAA,EAEvB,WAAW,EAAEC,YAAG,CAAC,UAAU,EAAE,IAC7B,CAAC;AAEH,IAAAC,qBAAY,CAAC,EAAE,CAAC,SAAS,EAAE,MAAK;QAC9B,WAAW,CAAC,UAAU,EAAE,CAAC;AAC3B,KAAC,CAAC,CAAC;AAEH,IAAAA,qBAAY,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAK;QAC7B,WAAW,CAAC,WAAW,EAAE,CAAC;AAC5B,KAAC,CAAC,CAAC;AAEH,IAAA,OAAO,WAAW,CAAC;AACrB,CAAC,EAAE;AAEH;;AAEG;AACH;AACO,MAAM,GAAG,GAAGC,gCAA2B,CAAC,cAAc,CAAC,IAAI,EAAE,cAAc;;;;;"}