{"version":3,"file":"anr.js","sources":["../../src/renderer/anr.ts"],"sourcesContent":["/* eslint-disable no-restricted-globals */\nimport { RendererProcessAnrOptions } from '../common/ipc';\nimport { getIPC } from './ipc';\n\n/**\n * Enables the sending of ANR messages to the main process.\n */\nexport function enableAnrRendererMessages(options: Partial<RendererProcessAnrOptions>): void {\n  const config: RendererProcessAnrOptions = {\n    pollInterval: 1_000,\n    anrThreshold: 5_000,\n    captureStackTrace: false,\n    ...options,\n  };\n\n  const ipc = getIPC();\n\n  document.addEventListener('visibilitychange', () => {\n    ipc.sendStatus({ status: document.visibilityState, config });\n  });\n\n  ipc.sendStatus({ status: document.visibilityState, config });\n\n  setInterval(() => {\n    ipc.sendStatus({ status: 'alive', config });\n  }, config.pollInterval);\n}\n"],"names":[],"mappings":";;AAIA;;AAEG;AACG,SAAU,yBAAyB,CAAC,OAA2C,EAAA;AACnF,IAAA,MAAM,MAAM,GACV,MAAA,CAAA,MAAA,CAAA,EAAA,YAAY,EAAE,IAAK,EACnB,YAAY,EAAE,IAAK,EACnB,iBAAiB,EAAE,KAAK,EACrB,EAAA,OAAO,CACX,CAAC;AAEF,IAAA,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC;AAErB,IAAA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAK;AACjD,QAAA,GAAG,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,QAAQ,CAAC,eAAe,EAAE,MAAM,EAAE,CAAC,CAAC;AAC/D,KAAC,CAAC,CAAC;AAEH,IAAA,GAAG,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,QAAQ,CAAC,eAAe,EAAE,MAAM,EAAE,CAAC,CAAC;IAE7D,WAAW,CAAC,MAAK;QACf,GAAG,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;AAC9C,KAAC,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;AAC1B;;;;"}