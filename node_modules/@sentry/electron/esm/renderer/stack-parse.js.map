{"version":3,"file":"stack-parse.js","sources":["../../src/renderer/stack-parse.ts"],"sourcesContent":["import { chromeStackLineParser } from '@sentry/browser';\nimport { StackFrame, StackParser } from '@sentry/types';\nimport { dropUndefinedKeys, nodeStackLineParser, stripSentryFramesAndReverse } from '@sentry/utils';\n\nconst STACKTRACE_FRAME_LIMIT = 50;\n\nconst [, chrome] = chromeStackLineParser;\nconst [, node] = nodeStackLineParser();\n\n/**\n * A stack parser than combines Chrome and node.js parsers to give the best results even when nodeIntegration = true\n */\nexport const electronRendererStackParser: StackParser = (stack: string, skipFirst: number = 0): StackFrame[] => {\n  const frames: StackFrame[] = [];\n\n  for (const line of stack.split('\\n').slice(skipFirst)) {\n    const chromeFrame = chrome(line);\n    const nodeFrame = node(line);\n\n    // We favour the chrome parser unless in_app == false\n    if (chromeFrame && nodeFrame?.in_app !== false) {\n      frames.push(chromeFrame);\n    } else if (nodeFrame) {\n      frames.push(dropUndefinedKeys(nodeFrame));\n    }\n\n    if (frames.length >= STACKTRACE_FRAME_LIMIT) {\n      break;\n    }\n  }\n\n  return stripSentryFramesAndReverse(frames);\n};\n"],"names":[],"mappings":";;;AAIA,MAAM,sBAAsB,GAAG,EAAE,CAAC;AAElC,MAAM,GAAG,MAAM,CAAC,GAAG,qBAAqB,CAAC;AACzC,MAAM,GAAG,IAAI,CAAC,GAAG,mBAAmB,EAAE,CAAC;AAEvC;;AAEG;AACU,MAAA,2BAA2B,GAAgB,CAAC,KAAa,EAAE,SAAA,GAAoB,CAAC,KAAkB;IAC7G,MAAM,MAAM,GAAiB,EAAE,CAAC;AAEhC,IAAA,KAAK,MAAM,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;AACrD,QAAA,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AACjC,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;;AAG7B,QAAA,IAAI,WAAW,IAAI,CAAA,SAAS,KAAT,IAAA,IAAA,SAAS,KAAT,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,SAAS,CAAE,MAAM,MAAK,KAAK,EAAE;AAC9C,YAAA,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC1B,SAAA;AAAM,aAAA,IAAI,SAAS,EAAE;YACpB,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC;AAC3C,SAAA;AAED,QAAA,IAAI,MAAM,CAAC,MAAM,IAAI,sBAAsB,EAAE;YAC3C,MAAM;AACP,SAAA;AACF,KAAA;AAED,IAAA,OAAO,2BAA2B,CAAC,MAAM,CAAC,CAAC;AAC7C;;;;"}