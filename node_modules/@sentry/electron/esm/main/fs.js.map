{"version":3,"file":"fs.js","sources":["../../src/main/fs.ts"],"sourcesContent":["import { app } from 'electron';\nimport { mkdir, readdir, readFile, stat, statSync, unlink, writeFile } from 'fs';\nimport { dirname, join, resolve } from 'path';\nimport { promisify } from 'util';\n\n/** Gets the Sentry Cache path */\nexport function getSentryCachePath(): string {\n  return join(app.getPath('userData'), 'sentry');\n}\n\nexport const writeFileAsync = promisify(writeFile);\nexport const readFileAsync = promisify(readFile);\nexport const mkdirAsync = promisify(mkdir);\nexport const statAsync = promisify(stat);\nexport const unlinkAsync = promisify(unlink);\nexport const readDirAsync = promisify(readdir);\n\n// mkdir with recursive was only added in Node 10+\n\n/**\n * Recursively creates the given path.\n *\n * @param path A relative or absolute path to create.\n * @returns A Promise that resolves when the path has been created.\n */\nexport async function mkdirp(path: string): Promise<void> {\n  // eslint-disable-next-line no-bitwise\n  const realPath = resolve(path);\n\n  try {\n    await mkdirAsync(realPath, 0o777);\n  } catch (err) {\n    const error = err as { code: string };\n    if (error && error.code === 'ENOENT') {\n      await mkdirp(dirname(realPath));\n      await mkdirAsync(realPath, 0o777);\n    }\n\n    try {\n      if (!statSync(realPath).isDirectory()) {\n        throw err;\n      }\n    } catch (_) {\n      throw err;\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;AAKA;SACgB,kBAAkB,GAAA;IAChC,OAAO,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,QAAQ,CAAC,CAAC;AACjD,CAAC;MAEY,cAAc,GAAG,SAAS,CAAC,SAAS,EAAE;MACtC,aAAa,GAAG,SAAS,CAAC,QAAQ,EAAE;MACpC,UAAU,GAAG,SAAS,CAAC,KAAK,EAAE;MAC9B,SAAS,GAAG,SAAS,CAAC,IAAI,EAAE;MAC5B,WAAW,GAAG,SAAS,CAAC,MAAM,EAAE;MAChC,YAAY,GAAG,SAAS,CAAC,OAAO,EAAE;AAE/C;AAEA;;;;;AAKG;AACG,SAAgB,MAAM,CAAC,IAAY,EAAA;;;AAEvC,QAAA,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;QAE/B,IAAI;AACF,YAAA,MAAM,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;AACnC,SAAA;AAAC,QAAA,OAAO,GAAG,EAAE;YACZ,MAAM,KAAK,GAAG,GAAuB,CAAC;AACtC,YAAA,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE;AACpC,gBAAA,MAAM,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAChC,gBAAA,MAAM,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;AACnC,aAAA;YAED,IAAI;gBACF,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,WAAW,EAAE,EAAE;AACrC,oBAAA,MAAM,GAAG,CAAC;AACX,iBAAA;AACF,aAAA;AAAC,YAAA,OAAO,CAAC,EAAE;AACV,gBAAA,MAAM,GAAG,CAAC;AACX,aAAA;AACF,SAAA;KACF,CAAA,CAAA;AAAA;;;;"}